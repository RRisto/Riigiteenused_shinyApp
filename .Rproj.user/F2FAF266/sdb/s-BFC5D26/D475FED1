{
    "contents" : "########Abiskript tõlkefailide õiesse kodeeringusse viimiseks\n#csv-st teeme rds, kuna muidu serverisse laadimisel tekib koadega jama\nkanali_tolked=read.csv(\"./translations/dictionary_channels.csv\", sep=\";\", stringsAsFactors = F)\nnaitaja_tolked=read.csv(\"./translations/dictionary_moodik.csv\", sep=\";\", stringsAsFactors = F)\nministeerium_tolked=read.csv(\"./translations/dictionary_ministeeriumid.csv\", sep=\";\", stringsAsFactors = F)\nasutused_tolked=read.csv(\"./translations/dictionary_asutused.csv\", sep=\";\", stringsAsFactors = F)\ntranslation=read.csv(\"./translations/dictionary_ui.csv\", sep=\";\")#tõlked interface raami jaoks\n\n#csv\nwrite.table(translation,\"./translations/dictionary_ui.csv\", sep=\";\",row.names = F, fileEncoding =\"utf-8\")\nwrite.table(asutused_tolked,\"./translations/dictionary_asutused.csv\", sep=\";\",row.names = F, fileEncoding =\"utf-8\")\nwrite.table(ministeerium_tolked,\"./translations/dictionary_ministeeriumid.csv\", sep=\";\",row.names = F, fileEncoding =\"utf-8\")\nwrite.table(naitaja_tolked,\"./translations/dictionary_moodik.csv\", sep=\";\",row.names = F, fileEncoding =\"utf-8\")\nwrite.table(kanali_tolked,\"./translations/dictionary_channels.csv\", sep=\";\",row.names = F, fileEncoding =\"utf-8\")\n\n#rds\n# saveRDS(kanali_tolked, \"./translations/dictionary_channels.RDS\")\n# saveRDS(naitaja_tolked, \"./translations/dictionary_moodik.RDS\")\n# saveRDS(ministeerium_tolked, \"./translations/dictionary_ministeeriumid.RDS\")\n# saveRDS(asutused_tolked, \"./translations/dictionary_asutused.RDS\")\n# saveRDS(translation, \"./translations/dictionary_ui.RDS\")\n\n############abiskript leidmaks tõlgetes mismache tegelikest andmetest\n#kanalid\nkanalOlemas=c()\nfor (i in 1:nrow(andmed)) {\n  if(andmed$kanal[i]%in%kanali_tolked$key) {\n    kanalOlemas[i]=FALSE\n  } else {\n    kanalOlemas[i]=TRUE\n  }\n}\n#väärtused, mis tõlke failis ei klapi\nunique(andmed$kanal[kanalOlemas])\n\n############allasutused\nasutusOlemas=c()\nfor (i in 1:nrow(andmed)) {\n  if(andmed$allasutus[i]%in%asutused_tolked$key) {\n    asutusOlemas[i]=FALSE\n  } else {\n    asutusOlemas[i]=TRUE\n  }\n}\n\n#väärtused, mis tõlke failis ei klapi\nunique(andmed$allasutus[asutusOlemas])\n\n#mitmel teenusel on statisika rohkem kui ühe aasta kohta\nlibrary(dplyr)\n\nmootmiseAastaUnik=andmed%>%\n  group_by(identifikaator)%>%\n  summarise(n=length(unique(MootmiseAasta)))\n\nmootmiseAastaUnik[mootmiseAastaUnik$n>1,]\n\n#asutuste musta nimekrija kuvamine\n#nimekirja kopisin riigiteenuste protalaist excelisse ja salvestasin csv-na\nasutused=read.csv(\"asutused_must.csv\", sep=\";\")\nasutused$Nimi=as.character(asutused$Nimi)\nasutused_eestikeel=asutused[grepl(\"Eesti keel\",asutused$Nimi)&!grepl(\"haldusala\",asutused$Nimi),]\nasutused_eestikeel=gsub(\"\\\\(Eesti keel)\", \"\", asutused_eestikeel)\n\nasutused_inglisekeel=asutused[grepl(\"Inglise keel\",asutused$Nimi)&!grepl(\"administrative area\",asutused$Nimi),]\nasutused_inglisekeel=gsub(\"\\\\(Inglise keel)\", \"\", asutused_inglisekeel)\n#remove whitespace\nlibrary(stringr)\nasutused_eestikeel=str_trim(asutused_eestikeel, side=\"right\")\nasutused_inglisekeel=str_trim(asutused_inglisekeel, side=\"right\")\n\n#duplikaadid välja\nasutused_eestikeel=asutused_eestikeel[!duplicated(asutused_eestikeel)]\nasutused_inglisekeel=asutused_inglisekeel[!duplicated(asutused_inglisekeel)]\n#salvestame\nwrite.table(asutused_eestikeel, \"asutused_est.csv\", row.names = F, sep=\";\")\nwrite.table(asutused_inglisekeel, \"asutused_eng.csv\", row.names = F, sep=\";\")\n\n\n",
    "created" : 1459524910962.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "3253821062",
    "id" : "D475FED1",
    "lastKnownWriteTime" : 1459528328,
    "path" : "~/R/Riigiteenused_shiny_translated/abiskript.R",
    "project_path" : "abiskript.R",
    "properties" : {
    },
    "relative_order" : 4,
    "source_on_save" : false,
    "type" : "r_source"
}